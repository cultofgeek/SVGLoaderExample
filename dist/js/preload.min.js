!function(window){"use strict";function Preloader(element,svgElement,settings){this.defaults={autoHide:!0,callback:function(){},onLoaded:function(){}},this.el=element,this.$preloader=$(element),this.svgElement=svgElement,this.settings=$.extend({},this.defaults,settings),this.checkInterval=null,this.progressCount=0,this.total=0,this._init()}Preloader.prototype={_init:function(){this.isDone=!1,this.autoHide=this.settings.autoHide,this.loadElements=this.settings.images,this.total=this.loadElements.length,this.animInDone=!1,this.animOutDone=!1,this.isAnimatingOut=!1,this.loadElements=this.settings.images,this.total=this.loadElements.length;var self=this;console.log(this.svgElement),this.svgLoader=new SVGLoader(this.svgElement,{speedIn:400,easingIn:mina.easeinout,animInComplete:function(){self.animInDone=!0},animOutComplete:function(){self.animOutDone=!0}})},_checkReady:function(){var self=this;console.log("waiting for animation"),null==this.checkInterval&&(this.checkInterval=setInterval(function(){self._checkAnimation()},30))},_onComplete:function(){console.log("Preloader: onComplete called"),this.reset(),this.settings.callback&&"function"==typeof this.settings.callback&&this.settings.callback()},_checkAnimation:function(){var self=this;if(self.animInDone&&self.animOutDone)self._onComplete();else if(self.animInDone&&self.isDone){var loadPercent=parseFloat(this.$preloader.css("width"))/$(window).width();!this.isAnimatingOut&&loadPercent>=1&&(self.hide(),this.settings.onLoaded&&"function"==typeof this.settings.onLoaded&&this.settings.onLoaded())}},reset:function(){console.log("Preloader: reset called"),this.isDone=!1,this.animInDone=!1,this.animOutDone=!1,this.isAnimatingOut=!1,this.progressCount=0,this.total=0,clearInterval(this.checkInterval),this.checkInterval=null,delete this.imgLoader},setImages:function(images){console.log("Preloader: setImages called"),console.log("images: "+images),this.loadElements=images,this.total=this.loadElements.length},start:function(){console.log("\nPreloader: start called");var self=this;this.show(),self._checkReady(),this.imgLoader=new imagesLoaded(this.loadElements),this.imgLoader.on("done",function(){self.isDone=!0}),this.imgLoader.on("progress",function(){self.update()})},show:function(){console.log("\nPreloader: show called"),this.svgLoader.show(),this.$preloader.css({display:"block",width:"0px"})},hide:function(){console.log("\nPreloader: hide called"),this.$preloader.css({display:"none"}),this.svgLoader.hide(),this.isAnimatingOut=!0},update:function(){this.progressCount++;var progress=this.progressCount/this.total;this.updateProgress(progress),this.progressCount>=this.total&&console.log("finished loading everything")},updateProgress:function(progress){if(progress>1||0>progress)throw"Progress value should be a number between 0 and 1";this.$preloader.css({width:100*progress+"%"})}},window.Preloader=Preloader}(window);